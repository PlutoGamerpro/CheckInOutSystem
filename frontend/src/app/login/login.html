<!-- Login form with phone number input and check in/out button -->
<form (ngSubmit)="checkInOrOut()" #loginForm="ngForm" novalidate [class.loading]="loading">
  <div id="login-container">
    <div class="loginContainer">
      <div class="login-header">
        <!-- Login page title -->
        <h1 id="login-title">Check ind/ud</h1>
        <p class="subtitle">Hold styr på din arbejdstid med et enkelt tap.</p>
      </div>
      <!-- Status chip indicating check-in or check-out status -->
      <div *ngIf="checkInTime || checkOutTime" class="status-chip" [class.checked-in]="isCheckedIn" [class.checked-out]="!isCheckedIn" aria-live="polite">
        <span class="dot"></span>
        <span>{{ isCheckedIn ? 'Du er checket ind' : 'Du er checket ud' }}</span>
      </div>

      <!-- Phone number input field with floating label and validation -->
      <div class="field">
        <input
          id="loginField"
          class="text-input"
          type="tel"
          name="phone"
          [(ngModel)]="phone"
          required
          minlength="8"
          maxlength="8"
          pattern="^[0-9]{8}$"
          inputmode="numeric"
          autocomplete="tel"
          placeholder=" "
          (keydown)="allowOnlyNumbers($event)"
          (paste)="onPasteNumbersOnly($event)"
          #phoneCtrl="ngModel"
          [attr.aria-invalid]="phoneCtrl.invalid && phoneCtrl.touched ? true : null"
          [attr.aria-describedby]="(phoneCtrl.invalid && phoneCtrl.touched) ? 'phoneError' : null"
        />
        <label for="loginField" class="floating">Telefonnummer (8 cifre)</label>
        <!-- Error message for invalid phone input -->
        <div class="field-error" *ngIf="phoneCtrl.touched && phoneCtrl.invalid" id="phoneError" aria-live="assertive">
          Indtast et gyldigt telefonnummer med 8 cifre.
        </div>
        <small class="helper-text">Dit nummer bruges kun til at registrere dine ind- og udtjekninger.</small>
      </div>

      <!-- Submit button with loading spinner -->
      <button id="loginBtn" type="submit" [disabled]="loading || loginForm.invalid" [attr.aria-busy]="loading ? 'true' : null">
        <span *ngIf="!loading">Check ind/ud</span>
        <span *ngIf="loading" class="loader" aria-hidden="true"></span>
      </button>

      <!-- Show check-in time if available -->
      <div *ngIf="checkInTime && isCheckedIn" class="feedback feedback-tight">
        Check-in tid: {{ checkInTime | date:'dd-MM-yyyy HH:mm:ss' }}
      </div>
      <!-- Show check-out time if available -->
      <div *ngIf="checkOutTime && !isCheckedIn" class="feedback feedback-tight">
        Check-ud tid: {{ checkOutTime | date:'dd-MM-yyyy HH:mm:ss' }}
      </div>

      <!-- Feedback message for login result -->
      <div *ngIf="message" class="feedback" role="alert" aria-live="polite">{{ message }}</div>

      <!-- Extra action row with profile creation and support link -->
      <div class="action-row">
        <button type="button" class="ghost-btn" (click)="goToSignup()">Opret profil</button>
        <a class="support-link" href="mailto:support@example.com">Har du brug for hjælp?</a>
      </div>
    </div>
  </div>
</form>
